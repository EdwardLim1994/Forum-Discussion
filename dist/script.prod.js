"use strict";$(document).ready(function(){var e,s,o,a=(new Date).getFullYear();$("#latestYear").text(a),$("#passwordConfirm").on("keyup",function(){$("#registerPassword").val()!=$("#passwordConfirm").val()?$("#passwordConfirm").removeClass("valid").addClass("invalid"):$("#passwordConfirm").removeClass("invalid").addClass("valid")}),$("#registerPassword").on("focusout",function(){""!=$("#registerPassword").val()&&($("#registerPassword").val()!=$("#passwordConfirm").val()?$("#passwordConfirm").removeClass("valid").addClass("invalid"):$("#passwordConfirm").removeClass("invalid").addClass("valid")),""==$("#passwordConfirm").val()&&($("#passwordConfirmLabel").removeClass("active"),$("#passwordConfirm").removeClass("invalid").removeClass("valid"))}),$("#passwordConfirm").on("keyup",function(){""==$("#passwordConfirm").val()&&$("#passwordConfirm").removeClass("invalid").removeClass("valid")}),$("#registerUsername").on("focusout",function(){var r=$("#registerUsername").val();$.ajax({type:"GET",url:"./includes/functions/getUsername.php",dataType:"json",success:function(a){0==a[0]?e=!0:$.each(a,function(a,s){return r==s?($("#registerUsernameLabel").attr("data-error","Username has already been used"),$("#registerUsername").removeClass("valid").addClass("invalid"),e=!1):($("#registerUsernameLabel").attr("data-error","Username usually don't start from digit"),void(e=!0))})},error:function(){console.log("register ajax failed")}}),$("#registerForm").submit(function(){return $("#registerPassword").val()==$("#passwordConfirm").val()&&e})}),$("#loginPassword").on("focusout",function(){var a=$("#loginPassword").val();""==a&&($("#loginPassword").removeClass("invalid").removeClass("valid"),s=!1),s=1==/^(?=.*\d)(?=.*[a-zA-Z]).{6,}$/.test(a)?($("#loginPasswordLabel").attr("data-error","Password contains more than 6 characters with digits and alphabert"),$("#loginPassword").removeClass("invalid").addClass("valid"),!0):($("#loginPasswordLabel").attr("data-error","Password contains more than 6 characters with digits and alphabert"),$("#loginPassword").removeClass("valid").addClass("invalid"),!1)}),$("#loginUsername").on("focusout",function(){var r=$("#loginUsername").val();$.ajax({type:"GET",url:"./includes/functions/verifyUser.php",dataType:"JSON",success:function(a){0==a[0]?($("#loginUsernameLabel").attr("data-error","Currently there is no registered user in database"),$("#loginUsername").removeClass("valid").addClass("invalid"),o=!1,$("#loginPassword").on("keyup focusout",function(){""==$("#loginPassword").val()?($("#loginPasswordLabel").attr("data-error","Password contains more than 6 characters with digits and alphabert"),$("#loginPassword").removeClass("invalid").removeClass("valid")):($("#loginPasswordLabel").attr("data-error","Cannot check password as there is no registered user in database"),$("#loginPassword").removeClass("valid").addClass("invalid"))})):$.each(a,function(a,s){return console.log(s.username),r==s.username?($("#loginUsernameLabel").attr("data-error","Username usually don't start from digit"),$("#loginUsername").removeClass("invalid").addClass("valid"),!(o=!0)):($("#loginUsernameLabel").attr("data-error","Username is either wrong or doesn't exist"),$("#loginUsername").removeClass("valid").addClass("invalid"),void(o=!1))})},error:function(){console.log("login ajax failed")}}),$("#loginForm").submit(function(){return 1==o&&1==s})})});